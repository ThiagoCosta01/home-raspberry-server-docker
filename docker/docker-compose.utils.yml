name: "home-server-utils"

volumes:
  portainer_data: {}

networks:
  default:
    name: home-server
    external: true

services:
    portainer:
        image: portainer/portainer-ce:latest
        restart: unless-stopped
        volumes:
         - portainer_data:/data
         - /var/run/docker.sock:/var/run/docker.sock
        ports:
            - '9000:9000'

    watchtower:
      image: containrrr/watchtower:latest
      restart: unless-stopped
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock
      cap_add:
        - NET_RAW

    zerotier:
      image: zerotier/zerotier:latest
      restart: unless-stopped
      volumes:
        - C:/Docker Images/zerotier:/var/lib/zerotier-one
      devices:
        - /dev/net/tun:/dev/net/tun
      cap_add:
        - NET_ADMIN
        - NET_RAW
        - SYS_ADMIN
      network_mode: host

    librespeed:
      image: lscr.io/linuxserver/librespeed:latest
      restart: unless-stopped
      environment:
        - TZ=America/Sao_Paulo
        - PUID=1000
        - PGID=1000
      volumes:
        - C:/Docker Images/librespeed:/config
      ports:
        - '9091:80'